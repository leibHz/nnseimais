<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Minha Conta - Supermercado Veronesi</title>
    
    <link rel="icon" href="assets/favicon.svg" type="image/svg+xml">
    <link rel="apple-touch-icon" href="assets/favicon.svg">
    <link rel="stylesheet" href="style.css">
    <script src="https://kit.fontawesome.com/cc533e21e1.js" crossorigin="anonymous"></script>
    
    <!-- ✅ CORREÇÃO APLICADA: StorageManager + Proteção de Rota -->
    <script src="storage-manager.js"></script>
    <script>
        // SCRIPT DE PROTEÇÃO DE ROTA (GUARDA)
        if (!StorageManager.isLoggedIn()) {
            window.location.href = `login.html?redirect=${window.location.pathname}`;
        }
    </script>
</head>
<body>
    <header class="main-header">
        <div class="container">
            <a href="index.html" class="logo-link">
                <img src="assets/logo.svg" alt="Logotipo Supermercado Veronesi" class="logo">
            </a>
            <nav class="main-nav">
                <!-- O script.js irá atualizar esta área -->
            </nav>
        </div>
    </header>

    <main class="container">
        <div class="welcome-card">
            <h2><i class="fa-solid fa-user-circle"></i> Minha Conta</h2>
            <p>Olá, <strong id="userName"></strong>! Bem-vindo(a) de volta.</p>
        </div>
        
        <section class="order-history-container">
            <h3 class="section-title">Seu Histórico de Encomendas</h3>
            <div id="order-list">
                <!-- O histórico de encomendas será renderizado aqui -->
            </div>
        </section>
    </main>

    <footer class="main-footer">
        <div class="container">
            <p>&copy; 2024 Supermercado Veronesi. Todos os direitos reservados.</p>
        </div>
    </footer>

    <!-- ✅ CORREÇÃO APLICADA: Scripts atualizados -->
    <script src="script.js?v=1.5"></script>
    <script src="minha-conta-script.js"></script>
</body>
</html>